const a8_0x42bb4e=a8_0x387b;function a8_0x476c(){const _0x218e1b=['Gdrive','1139478lRxDSh','8mlNtzq','toLocaleTimeString','includes','split','allgroups','isArray','../util/terminal','sendSeen','trim','224385UoqAMS','body','name',']\x20[FILTERED\x20WORD!]\x20','blockedkeywords','addMatch','map','replace','exports','logger','author','758796VfEjfC','2256821VoLTAd','[WARN!]\x20Cannot\x20get\x20variables\x0amake\x20sure\x20the\x20variables\x20worksheet\x20exists','toLocaleDateString','splice','type','hasMedia','4792563pwfKHS','GroupID','../util/files','924248YcRSzK','_serialized',']\x20[MATCH!]\x20','length','keywords','forEach','every','sheetsByTitle','from','25KnGZWj','downloadMedia','log','getChat','548382UGTVCG','private','push','phone','matchAll','conditions','GSpreadsheet','chatid','replyprivate',']\x20[REPEATED\x20MESSAGE!]\x20','reply','../config','some','[ERROR!]\x20Uploading\x20File\x20to\x20Gdrive:','filter','applicable','messageBuffer','gsheet','red','getCellByA1','formattedValue','en-EG','except','message','../util/dataOps',']\x20[ERROR!]\x20Sending\x20to\x20Google\x20Sheets:'];a8_0x476c=function(){return _0x218e1b;};return a8_0x476c();}function a8_0x387b(_0x5ec54a,_0x3d359){const _0x476ccd=a8_0x476c();return a8_0x387b=function(_0x387b0b,_0x1be9bd){_0x387b0b=_0x387b0b-0x118;let _0x49dfcd=_0x476ccd[_0x387b0b];return _0x49dfcd;},a8_0x387b(_0x5ec54a,_0x3d359);}(function(_0x3dbac2,_0x1fbe08){const _0x93cf97=a8_0x387b,_0x5ccbdb=_0x3dbac2();while(!![]){try{const _0x1c60a9=parseInt(_0x93cf97(0x12a))/0x1+parseInt(_0x93cf97(0x135))/0x2+-parseInt(_0x93cf97(0x120))/0x3+-parseInt(_0x93cf97(0x13f))/0x4+parseInt(_0x93cf97(0x148))/0x5*(parseInt(_0x93cf97(0x14c))/0x6)+-parseInt(_0x93cf97(0x136))/0x7*(-parseInt(_0x93cf97(0x121))/0x8)+-parseInt(_0x93cf97(0x13c))/0x9;if(_0x1c60a9===_0x1fbe08)break;else _0x5ccbdb['push'](_0x5ccbdb['shift']());}catch(_0x57f614){_0x5ccbdb['push'](_0x5ccbdb['shift']());}}}(a8_0x476c,0x3a8a0));const {messageBufferMAXLENGTH}=require(a8_0x42bb4e(0x157)),{getSheetID,getDriveID}=require(a8_0x42bb4e(0x13e)),{data2Stream}=require(a8_0x42bb4e(0x11d)),{isFiltered,isFilteredPhone,normalizeArabic,Sleep}=require('../util/misc'),{renderKeywords}=require('./controlMsgHandler'),terminal=require(a8_0x42bb4e(0x127)),getGroups=async()=>{const _0x34c62e=a8_0x42bb4e;let _0x37fa0a=await client['getChats'](),_0x34dee4=await _0x37fa0a[_0x34c62e(0x15a)](_0x14da44=>_0x14da44['isGroup']==!![]&&_0x14da44[_0x34c62e(0x12c)]!=undefined&&_0x14da44['id'][_0x34c62e(0x140)]!=settings[_0x34c62e(0x13d)]);return _0x34dee4=_0x34dee4['map'](_0x1e3944=>({'name':_0x1e3944['name'],'chatid':_0x1e3944['id'][_0x34c62e(0x140)]})),_0x34dee4;},storeMedia=async(_0x32b3e7,_0x14a007)=>{const _0x312b95=a8_0x42bb4e,_0x4ca064=getDriveID();if(_0x4ca064=='')return terminal[_0x312b95(0x133)]('[WARN!]\x20Google\x20Drive\x20Is\x20Not\x20Configured\x20Yet',0x1),'';const _0x59ab80=await _0x32b3e7[_0x312b95(0x149)](),_0x4141cb=await data2Stream(_0x59ab80,_0x14a007);try{const _0x5e2004=await global[_0x312b95(0x11f)]['createFile'](_0x4ca064,_0x4141cb);return _0x5e2004['data']['webViewLink'];}catch(_0x41486b){terminal[_0x312b95(0x15e)](_0x312b95(0x159)+_0x41486b);}},isRepeated=async({message:_0x883564,phone:_0x262efe})=>{const _0x54e42f=a8_0x42bb4e,_0x47543f=messageBuffer['some'](_0x779663=>_0x779663[_0x54e42f(0x11c)]==_0x883564&&_0x779663[_0x54e42f(0x14f)]==_0x262efe);return _0x47543f;},isMatchText=(_0x17de83,_0x43cb0b)=>{const _0x5b7048=a8_0x42bb4e;_0x43cb0b=normalizeArabic(_0x43cb0b);if(_0x43cb0b[_0x5b7048(0x123)]('++')){let _0x7ec9b0=_0x43cb0b[_0x5b7048(0x124)]('++')[_0x5b7048(0x130)](_0x73694e=>_0x73694e[_0x5b7048(0x129)]())[_0x5b7048(0x15a)](_0x5aae09=>_0x5aae09!=='');return _0x7ec9b0[_0x5b7048(0x145)](_0x2ce76b=>_0x17de83[_0x5b7048(0x123)](_0x2ce76b));}else return _0x17de83[_0x5b7048(0x123)](_0x43cb0b);},replaceVariables=async _0x2b980a=>{const _0x1b02e4=a8_0x42bb4e;try{const _0x461386=/\[([a-zA-Z]+)!([A-Z]{1,2}\d+)\]/g;let _0x1aa0c8=[..._0x2b980a[_0x1b02e4(0x150)](_0x461386)];if(_0x1aa0c8[_0x1b02e4(0x142)]>0x0)for await(const _0x34e4e4 of _0x1aa0c8){let _0x223b3a=_0x34e4e4[0x0],_0x5bdd53=_0x34e4e4[0x1],_0x216aa0=_0x34e4e4[0x2];console[_0x1b02e4(0x14a)](_0x223b3a,_0x5bdd53,_0x216aa0);let _0x209ffe=await global[_0x1b02e4(0x152)][_0x1b02e4(0x146)][_0x5bdd53];await _0x209ffe['loadCells'](_0x216aa0),await Sleep(0xc8);let _0x40acc3=String((await _0x209ffe[_0x1b02e4(0x118)](_0x216aa0))[_0x1b02e4(0x119)]);_0x2b980a=await _0x2b980a[_0x1b02e4(0x131)](_0x223b3a,_0x40acc3);}}catch(_0x2c368c){terminal[_0x1b02e4(0x133)](_0x1b02e4(0x137),0x1);}return _0x2b980a;},receivedmsgHandler=async _0x548723=>{const _0x4f88a3=a8_0x42bb4e,_0x9e1b84=new Date(),_0x3c8eef=_0x9e1b84[_0x4f88a3(0x138)]('en-GB')+'\x20'+_0x9e1b84[_0x4f88a3(0x122)](_0x4f88a3(0x11a));let _0x3c23ec=await _0x548723[_0x4f88a3(0x14b)]();const _0x187e88=_0x3c23ec['isGroup'],_0x224dde=_0x187e88?_0x548723[_0x4f88a3(0x147)]:_0x4f88a3(0x14d),_0x529c5a=_0x187e88?_0x548723[_0x4f88a3(0x134)][_0x4f88a3(0x124)]('@')[0x0]:_0x548723[_0x4f88a3(0x147)][_0x4f88a3(0x124)]('@')[0x0];let _0x59faf6=_0x187e88?(await getGroups())[_0x4f88a3(0x15a)](_0x13fbb8=>_0x13fbb8[_0x4f88a3(0x153)]==_0x224dde)[0x0][_0x4f88a3(0x12c)]:'Private';const _0x410d27=normalizeArabic(_0x548723[_0x4f88a3(0x12b)]);if(await isFiltered(_0x410d27)){terminal[_0x4f88a3(0x133)]('['+_0x3c8eef+_0x4f88a3(0x12d)+_0x59faf6+'-'+_0x529c5a,0x1);return;}if(await isFilteredPhone(_0x529c5a)){terminal['logger']('['+_0x3c8eef+']\x20[FILTERED\x20PHONE!]\x20'+_0x59faf6+'-'+_0x529c5a,0x1);return;}if(await isRepeated({'message':_0x410d27,'phone':_0x529c5a})){terminal[_0x4f88a3(0x133)]('['+_0x3c8eef+_0x4f88a3(0x155)+_0x59faf6+'-'+_0x529c5a,0x1);return;}for(const _0x1f4212 of global[_0x4f88a3(0x151)]){let _0x2628dd=_0x1f4212[_0x4f88a3(0x15b)][_0x4f88a3(0x158)](_0x350682=>_0x350682[_0x4f88a3(0x153)]==_0x224dde||_0x187e88&&_0x350682[_0x4f88a3(0x153)]==_0x4f88a3(0x125)||_0x187e88&&_0x350682['chatid']==_0x4f88a3(0x11b)&&_0x350682[_0x4f88a3(0x11b)]['every'](_0x119e30=>_0x119e30[_0x4f88a3(0x153)]!=_0x224dde)),_0x5d343a=_0x1f4212['keywords'][_0x4f88a3(0x158)](_0x2eaeba=>{const _0x32e3f0=_0x4f88a3;if(Array[_0x32e3f0(0x126)](_0x2eaeba)){let _0x2d3415=!![];return _0x2eaeba[_0x32e3f0(0x144)](_0x8b576e=>{const _0x96f0dc=_0x32e3f0;Array[_0x96f0dc(0x126)](_0x8b576e)?_0x2d3415=_0x2d3415&&_0x8b576e['some'](_0x36b890=>{const _0x191af4=_0x96f0dc;return _0x36b890=normalizeArabic(_0x36b890),_0x410d27[_0x191af4(0x123)](_0x36b890);}):_0x2d3415=_0x2d3415&&isMatchText(_0x410d27,_0x8b576e);}),_0x2d3415;}else return isMatchText(_0x410d27,_0x2eaeba);}),_0x9705c1=_0x1f4212[_0x4f88a3(0x12e)][_0x4f88a3(0x158)](_0x191385=>{const _0x5a71a5=_0x4f88a3;if(Array[_0x5a71a5(0x126)](_0x191385)){let _0x53d2cc=!![];return _0x191385[_0x5a71a5(0x144)](_0x15bca4=>{const _0x9d399a=_0x5a71a5;Array[_0x9d399a(0x126)](_0x15bca4)?_0x53d2cc=_0x53d2cc&&_0x15bca4[_0x9d399a(0x158)](_0x39394c=>{return _0x39394c=normalizeArabic(_0x39394c),_0x410d27['includes'](_0x39394c);}):_0x53d2cc=_0x53d2cc&&isMatchText(_0x410d27,_0x15bca4);}),_0x53d2cc;}else return isMatchText(_0x410d27,_0x191385);});if(_0x2628dd)_0x3c23ec[_0x4f88a3(0x128)]();if(_0x2628dd&&_0x5d343a&&!_0x9705c1){const _0xd33f88=getSheetID();if(_0xd33f88=='')return;let _0x20aced=renderKeywords(_0x1f4212[_0x4f88a3(0x143)]),_0x3f45a5=_0x548723[_0x4f88a3(0x13b)]?await storeMedia(_0x548723,_0x529c5a):'';const _0x298c65=[_0x3c8eef,_0x529c5a,_0x59faf6,_0x410d27,_0x3f45a5,_0x1f4212['name'],_0x20aced];terminal[_0x4f88a3(0x133)]('['+_0x3c8eef+_0x4f88a3(0x141)+_0x59faf6+'-'+_0x529c5a+'=>'+_0x548723[_0x4f88a3(0x13a)]+'\x20'+_0x20aced);const _0x1076b0=_0x1f4212[_0x4f88a3(0x15d)]['sheetId'];try{Gsheet[_0x4f88a3(0x12f)](_0x1076b0,_0x298c65);}catch(_0x258b11){terminal[_0x4f88a3(0x15e)]('['+_0x3c8eef+_0x4f88a3(0x11e)+_0x258b11);}_0x1f4212[_0x4f88a3(0x156)]&&_0x187e88&&_0x548723[_0x4f88a3(0x156)](await replaceVariables(_0x1f4212[_0x4f88a3(0x156)]));_0x1f4212[_0x4f88a3(0x154)]&&client['sendMessage'](_0x529c5a+'@c.us',await replaceVariables(_0x1f4212[_0x4f88a3(0x154)]));let _0x32d5b=messageBuffer[_0x4f88a3(0x142)];_0x32d5b>messageBufferMAXLENGTH&&messageBuffer[_0x4f88a3(0x139)](0x0,_0x32d5b-messageBufferMAXLENGTH),global[_0x4f88a3(0x15c)][_0x4f88a3(0x14e)]({'message':_0x410d27,'phone':_0x529c5a});}}};module[a8_0x42bb4e(0x132)]={'receivedmsgHandler':receivedmsgHandler};