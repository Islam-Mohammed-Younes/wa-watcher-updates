const a8_0xb0b5a3=a8_0x2133;(function(_0x111a03,_0xe9bc87){const _0x4b5902=a8_0x2133,_0x5cf2ef=_0x111a03();while(!![]){try{const _0x35540d=parseInt(_0x4b5902(0x1ef))/0x1*(parseInt(_0x4b5902(0x1d4))/0x2)+-parseInt(_0x4b5902(0x1d3))/0x3*(-parseInt(_0x4b5902(0x1cb))/0x4)+parseInt(_0x4b5902(0x1da))/0x5+parseInt(_0x4b5902(0x1f6))/0x6*(-parseInt(_0x4b5902(0x200))/0x7)+-parseInt(_0x4b5902(0x1d7))/0x8*(parseInt(_0x4b5902(0x1f1))/0x9)+-parseInt(_0x4b5902(0x1df))/0xa+parseInt(_0x4b5902(0x1d2))/0xb;if(_0x35540d===_0xe9bc87)break;else _0x5cf2ef['push'](_0x5cf2ef['shift']());}catch(_0x193ad5){_0x5cf2ef['push'](_0x5cf2ef['shift']());}}}(a8_0x5617,0xde3ee));function a8_0x2133(_0x20b44e,_0x1c4a6b){const _0x5617cc=a8_0x5617();return a8_0x2133=function(_0x2133a1,_0x531ce0){_0x2133a1=_0x2133a1-0x1cb;let _0x2e6b88=_0x5617cc[_0x2133a1];return _0x2e6b88;},a8_0x2133(_0x20b44e,_0x1c4a6b);}const {messageBufferMAXLENGTH}=require('../config'),{getSheetID,getDriveID}=require('../util/files'),{data2Stream}=require(a8_0xb0b5a3(0x1dd)),{isFiltered,isFilteredPhone,normalizeArabic}=require('../util/misc'),{renderKeywords}=require(a8_0xb0b5a3(0x1e6)),terminal=require('../util/terminal'),getGroups=async()=>{const _0x4fe9f0=a8_0xb0b5a3;let _0x2679d4=await client[_0x4fe9f0(0x1f4)](),_0x281df8=await _0x2679d4[_0x4fe9f0(0x1fa)](_0x1df715=>_0x1df715[_0x4fe9f0(0x1e8)]==!![]&&_0x1df715[_0x4fe9f0(0x1ce)]!=undefined&&_0x1df715['id'][_0x4fe9f0(0x1ea)]!=settings[_0x4fe9f0(0x1e2)]);return _0x281df8=_0x281df8['map'](_0x5dcdf9=>({'name':_0x5dcdf9['name'],'chatid':_0x5dcdf9['id']['_serialized']})),_0x281df8;},storeMedia=async(_0x460d40,_0x3ee074)=>{const _0x309667=a8_0xb0b5a3,_0x54e424=getDriveID();if(_0x54e424=='')return terminal['logger'](_0x309667(0x1ed),0x1),'';const _0x4f34f2=await _0x460d40['downloadMedia'](),_0x4318a7=await data2Stream(_0x4f34f2,_0x3ee074);try{const _0x422878=await global[_0x309667(0x1e0)][_0x309667(0x1ee)](_0x54e424,_0x4318a7);return _0x422878[_0x309667(0x1de)][_0x309667(0x1e5)];}catch(_0x8ae288){terminal[_0x309667(0x1db)]('[ERROR!]\x20Uploading\x20File\x20to\x20Gdrive:'+_0x8ae288);}},isRepeated=async({message:_0x427921,phone:_0x2f7993})=>{const _0x5076a3=a8_0xb0b5a3,_0x2c6432=messageBuffer[_0x5076a3(0x1f7)](_0x4c352f=>_0x4c352f[_0x5076a3(0x203)]==_0x427921&&_0x4c352f['phone']==_0x2f7993);return _0x2c6432;},isMatchText=(_0x451674,_0x42a59d)=>{const _0x271d29=a8_0xb0b5a3;_0x42a59d=normalizeArabic(_0x42a59d);if(_0x42a59d[_0x271d29(0x1fb)]('++')){let _0x587fe8=_0x42a59d['split']('++')['map'](_0x4aefc6=>_0x4aefc6['trim']())[_0x271d29(0x1fa)](_0x2c7d83=>_0x2c7d83!=='');return _0x587fe8['every'](_0x44b41b=>_0x451674['includes'](_0x44b41b));}else return _0x451674[_0x271d29(0x1fb)](_0x42a59d);},receivedmsgHandler=async _0x43941f=>{const _0x2e6718=a8_0xb0b5a3,_0x2eeafe=new Date(),_0x234847=_0x2eeafe['toLocaleDateString'](_0x2e6718(0x1fd))+'\x20'+_0x2eeafe[_0x2e6718(0x1fe)](_0x2e6718(0x1e9));let _0x53e05b=await _0x43941f['getChat']();const _0xf2027e=_0x53e05b['isGroup'],_0x252997=_0xf2027e?_0x43941f[_0x2e6718(0x1e4)]:_0x2e6718(0x1cd),_0xaa4cd2=_0xf2027e?_0x43941f[_0x2e6718(0x1d1)]['split']('@')[0x0]:_0x43941f[_0x2e6718(0x1e4)][_0x2e6718(0x1f3)]('@')[0x0],_0xec0c9e=normalizeArabic(_0x43941f[_0x2e6718(0x1d6)]);if(await isFiltered(_0xec0c9e)){terminal[_0x2e6718(0x1f2)](_0x2e6718(0x1d8)+_0xaa4cd2,0x1);return;}if(await isFilteredPhone(_0xaa4cd2)){terminal[_0x2e6718(0x1f2)](_0x2e6718(0x1ff)+_0xaa4cd2,0x1);return;}if(await isRepeated({'message':_0xec0c9e,'phone':_0xaa4cd2})){terminal[_0x2e6718(0x1f2)](_0x2e6718(0x204)+_0xaa4cd2,0x1);return;}for(const _0x53884a of global[_0x2e6718(0x1eb)]){let _0x17d295=_0x53884a[_0x2e6718(0x1f0)]['some'](_0x4dfa86=>_0x4dfa86[_0x2e6718(0x1d5)]==_0x252997||_0xf2027e&&_0x4dfa86[_0x2e6718(0x1d5)]==_0x2e6718(0x1e1)||_0xf2027e&&_0x4dfa86['chatid']==_0x2e6718(0x1ec)&&_0x4dfa86[_0x2e6718(0x1ec)]['every'](_0x342b4f=>_0x342b4f[_0x2e6718(0x1d5)]!=_0x252997)),_0x211ef6=_0x53884a[_0x2e6718(0x1fc)][_0x2e6718(0x1f7)](_0x3dab80=>{const _0x38891b=_0x2e6718;if(Array[_0x38891b(0x1d9)](_0x3dab80)){let _0x1930a6=!![];return _0x3dab80['forEach'](_0x275b95=>{const _0x27524f=_0x38891b;Array[_0x27524f(0x1d9)](_0x275b95)?_0x1930a6=_0x1930a6&&_0x275b95['some'](_0x4b8d5c=>{return _0x4b8d5c=normalizeArabic(_0x4b8d5c),_0xec0c9e['includes'](_0x4b8d5c);}):_0x1930a6=_0x1930a6&&isMatchText(_0xec0c9e,_0x275b95);}),_0x1930a6;}else return isMatchText(_0xec0c9e,_0x3dab80);}),_0x5b8017=_0x53884a['blockedkeywords']['some'](_0x13eb5e=>{const _0x26876c=_0x2e6718;if(Array[_0x26876c(0x1d9)](_0x13eb5e)){let _0x5df797=!![];return _0x13eb5e[_0x26876c(0x1cc)](_0x32ca36=>{const _0x419634=_0x26876c;Array[_0x419634(0x1d9)](_0x32ca36)?_0x5df797=_0x5df797&&_0x32ca36[_0x419634(0x1f7)](_0x4a2185=>{const _0x1b814f=_0x419634;return _0x4a2185=normalizeArabic(_0x4a2185),_0xec0c9e[_0x1b814f(0x1fb)](_0x4a2185);}):_0x5df797=_0x5df797&&isMatchText(_0xec0c9e,_0x32ca36);}),_0x5df797;}else return isMatchText(_0xec0c9e,_0x13eb5e);});if(_0x17d295)_0x53e05b[_0x2e6718(0x201)]();if(_0x17d295&&_0x211ef6&&!_0x5b8017){const _0x47587e=getSheetID();if(_0x47587e=='')return;let _0x29549c=_0xf2027e?(await getGroups())[_0x2e6718(0x1fa)](_0x34d711=>_0x34d711[_0x2e6718(0x1d5)]==_0x252997)[0x0][_0x2e6718(0x1ce)]:_0x2e6718(0x202),_0x499f7b=renderKeywords(_0x53884a['keywords']),_0x488945=_0x43941f[_0x2e6718(0x205)]?await storeMedia(_0x43941f,_0xaa4cd2):'';const _0x5a2828=[_0x234847,_0xaa4cd2,_0x29549c,_0xec0c9e,_0x488945,_0x53884a['name'],_0x499f7b];terminal[_0x2e6718(0x1f2)]('[MATCH!]\x20'+_0x29549c+'-'+_0xaa4cd2+'=>'+_0x43941f['type']);const _0x570a02=_0x53884a[_0x2e6718(0x1cf)]['sheetId'];try{Gsheet[_0x2e6718(0x1f9)](_0x570a02,_0x5a2828);}catch(_0x58766d){terminal['red']('[ERROR!]\x20Sending\x20to\x20Google\x20Sheets:'+_0x58766d);}if(_0x53884a[_0x2e6718(0x1d0)]&&_0xf2027e)_0x43941f['reply'](_0x53884a[_0x2e6718(0x1d0)]);if(_0x53884a[_0x2e6718(0x1dc)])client[_0x2e6718(0x1e3)](_0xaa4cd2+_0x2e6718(0x1f5),_0x53884a[_0x2e6718(0x1dc)]);let _0x22838d=messageBuffer[_0x2e6718(0x1e7)];_0x22838d>messageBufferMAXLENGTH&&messageBuffer['splice'](0x0,_0x22838d-messageBufferMAXLENGTH),global['messageBuffer'][_0x2e6718(0x1f8)]({'message':_0xec0c9e,'phone':_0xaa4cd2});}}};module['exports']={'receivedmsgHandler':receivedmsgHandler};function a8_0x5617(){const _0x4c999d=['webViewLink','./controlMsgHandler','length','isGroup','en-EG','_serialized','conditions','except','[WARN!]\x20Google\x20Drive\x20Is\x20Not\x20Configured\x20Yet','createFile','2zbbcZh','applicable','6798366GPzFiI','logger','split','getChats','@c.us','6pUTLWg','some','push','addMatch','filter','includes','keywords','en-GB','toLocaleTimeString','[FILTERED\x20PHONE!]\x20','10909640hYCLyh','sendSeen','Private','message','[REPEATED\x20MESSAGE!]\x20','hasMedia','39196NmTRfk','forEach','private','name','gsheet','reply','author','17795393PEHrUt','3EcetBp','1671958TgVLpB','chatid','body','8kJQpRC','[FILTERED\x20WORD!]\x20','isArray','3718780ZYLIgv','red','replyprivate','../util/dataOps','data','8190640aPQSXz','Gdrive','allgroups','GroupID','sendMessage','from'];a8_0x5617=function(){return _0x4c999d;};return a8_0x5617();}