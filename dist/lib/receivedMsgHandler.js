const a8_0x1f53f0=a8_0x3078;(function(_0x72dccd,_0x104c11){const _0xea5559=a8_0x3078,_0x38ef01=_0x72dccd();while(!![]){try{const _0x3e22c3=parseInt(_0xea5559(0xed))/0x1*(parseInt(_0xea5559(0x105))/0x2)+-parseInt(_0xea5559(0xfd))/0x3+parseInt(_0xea5559(0xf0))/0x4+parseInt(_0xea5559(0xf9))/0x5+-parseInt(_0xea5559(0x104))/0x6+parseInt(_0xea5559(0xe7))/0x7+-parseInt(_0xea5559(0xe2))/0x8*(parseInt(_0xea5559(0xde))/0x9);if(_0x3e22c3===_0x104c11)break;else _0x38ef01['push'](_0x38ef01['shift']());}catch(_0x327935){_0x38ef01['push'](_0x38ef01['shift']());}}}(a8_0x42a1,0xa367d));function a8_0x3078(_0x2ddc13,_0x53c361){const _0x42a1f5=a8_0x42a1();return a8_0x3078=function(_0x307890,_0x5c43ac){_0x307890=_0x307890-0xce;let _0x2dcf4b=_0x42a1f5[_0x307890];return _0x2dcf4b;},a8_0x3078(_0x2ddc13,_0x53c361);}function a8_0x42a1(){const _0x18c6ec=['gsheet','filter','webViewLink','name','data','private',']\x20[ERROR!]\x20Sending\x20to\x20Google\x20Sheets:','exports','getChats','hasMedia','1557YDhRlX','sendSeen','../config','phone','46536XONNTy','[WARN!]\x20Google\x20Drive\x20Is\x20Not\x20Configured\x20Yet','downloadMedia','sheetId','../util/dataOps','8761487wTWfhg','body','en-EG','_serialized','keywords','formattedValue','708767jdLlqt','forEach','red','2187216wboLOS',']\x20[MATCH!]\x20','getCellByA1','logger','replace','message','except','replyprivate','./controlMsgHandler','2215755cHmyPV','split','sheetsByTitle','some','3367683SmlErj','loadCells','isGroup','en-GB','Gdrive','toLocaleTimeString','length','912912AtFQbU','2mpBKez',']\x20[REPEATED\x20MESSAGE!]\x20','@c.us','allgroups','chatid','applicable','getChat','GroupID','isArray','blockedkeywords','reply','from','every','../util/misc','includes','conditions','[ERROR!]\x20Uploading\x20File\x20to\x20Gdrive:','map','GSpreadsheet'];a8_0x42a1=function(){return _0x18c6ec;};return a8_0x42a1();}const {messageBufferMAXLENGTH}=require(a8_0x1f53f0(0xe0)),{getSheetID,getDriveID}=require('../util/files'),{data2Stream}=require(a8_0x1f53f0(0xe6)),{isFiltered,isFilteredPhone,normalizeArabic}=require(a8_0x1f53f0(0xce)),{renderKeywords}=require(a8_0x1f53f0(0xf8)),terminal=require('../util/terminal'),getGroups=async()=>{const _0x5f50f9=a8_0x1f53f0;let _0x3f3ab6=await client[_0x5f50f9(0xdc)](),_0x465642=await _0x3f3ab6[_0x5f50f9(0xd5)](_0x230eb8=>_0x230eb8[_0x5f50f9(0xff)]==!![]&&_0x230eb8[_0x5f50f9(0xd7)]!=undefined&&_0x230eb8['id'][_0x5f50f9(0xea)]!=settings[_0x5f50f9(0x10c)]);return _0x465642=_0x465642[_0x5f50f9(0xd2)](_0x385bfa=>({'name':_0x385bfa[_0x5f50f9(0xd7)],'chatid':_0x385bfa['id'][_0x5f50f9(0xea)]})),_0x465642;},storeMedia=async(_0x324a3e,_0x53971f)=>{const _0x4747fe=a8_0x1f53f0,_0x32b1f8=getDriveID();if(_0x32b1f8=='')return terminal['logger'](_0x4747fe(0xe3),0x1),'';const _0x5a14b2=await _0x324a3e[_0x4747fe(0xe4)](),_0x45ed2f=await data2Stream(_0x5a14b2,_0x53971f);try{const _0x31033e=await global[_0x4747fe(0x101)]['createFile'](_0x32b1f8,_0x45ed2f);return _0x31033e[_0x4747fe(0xd8)][_0x4747fe(0xd6)];}catch(_0x3c0780){terminal['red'](_0x4747fe(0xd1)+_0x3c0780);}},isRepeated=async({message:_0x12a1fd,phone:_0xe92bcc})=>{const _0x121785=a8_0x1f53f0,_0x57ab67=messageBuffer['some'](_0x56037d=>_0x56037d[_0x121785(0xf5)]==_0x12a1fd&&_0x56037d[_0x121785(0xe1)]==_0xe92bcc);return _0x57ab67;},isMatchText=(_0x44a8af,_0x275099)=>{const _0x250401=a8_0x1f53f0;_0x275099=normalizeArabic(_0x275099);if(_0x275099[_0x250401(0xcf)]('++')){let _0x21cbfa=_0x275099[_0x250401(0xfa)]('++')[_0x250401(0xd2)](_0x379235=>_0x379235['trim']())['filter'](_0x145b94=>_0x145b94!=='');return _0x21cbfa[_0x250401(0x111)](_0x2d1b4c=>_0x44a8af['includes'](_0x2d1b4c));}else return _0x44a8af[_0x250401(0xcf)](_0x275099);},replaceVariables=async _0x93f021=>{const _0x3db15e=a8_0x1f53f0;try{const _0x4fe76e=/\[([a-zA-Z]+)!([A-Z]{2}\d+)\]/g;let _0x9a72cc=[..._0x93f021['matchAll'](_0x4fe76e)];if(_0x9a72cc[_0x3db15e(0x103)]>0x0)for await(const _0xc64058 of _0x9a72cc){let _0x1cc4c0=_0xc64058[0x0],_0x64debc=_0xc64058[0x1],_0x3a380a=_0xc64058[0x2],_0x4dca06=await global[_0x3db15e(0xd3)][_0x3db15e(0xfb)][_0x64debc];await _0x4dca06[_0x3db15e(0xfe)](_0x3a380a);let _0x34cdeb=String(_0x4dca06[_0x3db15e(0xf2)](_0x3a380a)[_0x3db15e(0xec)]);_0x93f021=_0x93f021[_0x3db15e(0xf4)](_0x1cc4c0,_0x34cdeb);}}catch(_0xa9d3fe){terminal['logger']('[WARN!]\x20Cannot\x20get\x20variables\x0amake\x20sure\x20the\x20variables\x20worksheet\x20exists',0x1);}return _0x93f021;},receivedmsgHandler=async _0x428379=>{const _0x1d4ccb=a8_0x1f53f0,_0x1365e7=new Date(),_0x41a3e1=_0x1365e7['toLocaleDateString'](_0x1d4ccb(0x100))+'\x20'+_0x1365e7[_0x1d4ccb(0x102)](_0x1d4ccb(0xe9));let _0x4832dc=await _0x428379[_0x1d4ccb(0x10b)]();const _0x112b2c=_0x4832dc[_0x1d4ccb(0xff)],_0x39bccb=_0x112b2c?_0x428379[_0x1d4ccb(0x110)]:_0x1d4ccb(0xd9),_0x20a6a8=_0x112b2c?_0x428379['author'][_0x1d4ccb(0xfa)]('@')[0x0]:_0x428379['from'][_0x1d4ccb(0xfa)]('@')[0x0];let _0x120611=_0x112b2c?(await getGroups())['filter'](_0x27c4fd=>_0x27c4fd['chatid']==_0x39bccb)[0x0][_0x1d4ccb(0xd7)]:'Private';const _0x4a3a4c=normalizeArabic(_0x428379[_0x1d4ccb(0xe8)]);if(await isFiltered(_0x4a3a4c)){terminal['logger']('['+_0x41a3e1+']\x20[FILTERED\x20WORD!]\x20'+_0x120611+'-'+_0x20a6a8,0x1);return;}if(await isFilteredPhone(_0x20a6a8)){terminal['logger']('['+_0x41a3e1+']\x20[FILTERED\x20PHONE!]\x20'+_0x120611+'-'+_0x20a6a8,0x1);return;}if(await isRepeated({'message':_0x4a3a4c,'phone':_0x20a6a8})){terminal[_0x1d4ccb(0xf3)]('['+_0x41a3e1+_0x1d4ccb(0x106)+_0x120611+'-'+_0x20a6a8,0x1);return;}for(const _0x404cc9 of global[_0x1d4ccb(0xd0)]){let _0x2399b4=_0x404cc9[_0x1d4ccb(0x10a)][_0x1d4ccb(0xfc)](_0x552e4b=>_0x552e4b[_0x1d4ccb(0x109)]==_0x39bccb||_0x112b2c&&_0x552e4b[_0x1d4ccb(0x109)]==_0x1d4ccb(0x108)||_0x112b2c&&_0x552e4b[_0x1d4ccb(0x109)]=='except'&&_0x552e4b[_0x1d4ccb(0xf6)][_0x1d4ccb(0x111)](_0x1b6387=>_0x1b6387[_0x1d4ccb(0x109)]!=_0x39bccb)),_0x332eca=_0x404cc9[_0x1d4ccb(0xeb)][_0x1d4ccb(0xfc)](_0x117e39=>{const _0x44af4c=_0x1d4ccb;if(Array[_0x44af4c(0x10d)](_0x117e39)){let _0x50e43f=!![];return _0x117e39[_0x44af4c(0xee)](_0x375a8c=>{const _0x4b895c=_0x44af4c;Array[_0x4b895c(0x10d)](_0x375a8c)?_0x50e43f=_0x50e43f&&_0x375a8c[_0x4b895c(0xfc)](_0x807625=>{return _0x807625=normalizeArabic(_0x807625),_0x4a3a4c['includes'](_0x807625);}):_0x50e43f=_0x50e43f&&isMatchText(_0x4a3a4c,_0x375a8c);}),_0x50e43f;}else return isMatchText(_0x4a3a4c,_0x117e39);}),_0x1839cb=_0x404cc9[_0x1d4ccb(0x10e)]['some'](_0x153738=>{const _0xe69b64=_0x1d4ccb;if(Array['isArray'](_0x153738)){let _0x2acc10=!![];return _0x153738[_0xe69b64(0xee)](_0x24d44d=>{const _0x35f722=_0xe69b64;Array[_0x35f722(0x10d)](_0x24d44d)?_0x2acc10=_0x2acc10&&_0x24d44d[_0x35f722(0xfc)](_0x1d3129=>{const _0x18c4c1=_0x35f722;return _0x1d3129=normalizeArabic(_0x1d3129),_0x4a3a4c[_0x18c4c1(0xcf)](_0x1d3129);}):_0x2acc10=_0x2acc10&&isMatchText(_0x4a3a4c,_0x24d44d);}),_0x2acc10;}else return isMatchText(_0x4a3a4c,_0x153738);});if(_0x2399b4)_0x4832dc[_0x1d4ccb(0xdf)]();if(_0x2399b4&&_0x332eca&&!_0x1839cb){const _0x48e282=getSheetID();if(_0x48e282=='')return;let _0x9782c6=renderKeywords(_0x404cc9['keywords']),_0x925b53=_0x428379[_0x1d4ccb(0xdd)]?await storeMedia(_0x428379,_0x20a6a8):'';const _0x474a8=[_0x41a3e1,_0x20a6a8,_0x120611,_0x4a3a4c,_0x925b53,_0x404cc9[_0x1d4ccb(0xd7)],_0x9782c6];terminal[_0x1d4ccb(0xf3)]('['+_0x41a3e1+_0x1d4ccb(0xf1)+_0x120611+'-'+_0x20a6a8+'=>'+_0x428379['type']+'\x20'+_0x9782c6);const _0x4b7d94=_0x404cc9[_0x1d4ccb(0xd4)][_0x1d4ccb(0xe5)];try{Gsheet['addMatch'](_0x4b7d94,_0x474a8);}catch(_0x1ef7ce){terminal[_0x1d4ccb(0xef)]('['+_0x41a3e1+_0x1d4ccb(0xda)+_0x1ef7ce);}_0x404cc9['reply']&&_0x112b2c&&_0x428379[_0x1d4ccb(0x10f)](await replaceVariables(_0x404cc9['reply']));_0x404cc9[_0x1d4ccb(0xf7)]&&client['sendMessage'](_0x20a6a8+_0x1d4ccb(0x107),await replaceVariables(_0x404cc9['replyprivate']));let _0x1998c2=messageBuffer[_0x1d4ccb(0x103)];_0x1998c2>messageBufferMAXLENGTH&&messageBuffer['splice'](0x0,_0x1998c2-messageBufferMAXLENGTH),global['messageBuffer']['push']({'message':_0x4a3a4c,'phone':_0x20a6a8});}}};module[a8_0x1f53f0(0xdb)]={'receivedmsgHandler':receivedmsgHandler};