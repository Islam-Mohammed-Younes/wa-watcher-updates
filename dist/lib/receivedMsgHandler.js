const a8_0x2a4684=a8_0x3f0e;(function(_0x5c26cc,_0x36a82b){const _0x1f1ca9=a8_0x3f0e,_0x42cff3=_0x5c26cc();while(!![]){try{const _0xe3ecac=-parseInt(_0x1f1ca9(0x166))/0x1*(parseInt(_0x1f1ca9(0x15c))/0x2)+parseInt(_0x1f1ca9(0x199))/0x3+parseInt(_0x1f1ca9(0x196))/0x4+-parseInt(_0x1f1ca9(0x18d))/0x5+-parseInt(_0x1f1ca9(0x175))/0x6+parseInt(_0x1f1ca9(0x178))/0x7*(parseInt(_0x1f1ca9(0x190))/0x8)+-parseInt(_0x1f1ca9(0x18b))/0x9*(-parseInt(_0x1f1ca9(0x189))/0xa);if(_0xe3ecac===_0x36a82b)break;else _0x42cff3['push'](_0x42cff3['shift']());}catch(_0x975395){_0x42cff3['push'](_0x42cff3['shift']());}}}(a8_0x2c6c,0xcaeab));function a8_0x3f0e(_0xe50341,_0x5bd383){const _0x2c6cbe=a8_0x2c6c();return a8_0x3f0e=function(_0x3f0e72,_0xb6e2d5){_0x3f0e72=_0x3f0e72-0x15c;let _0xaf5d85=_0x2c6cbe[_0x3f0e72];return _0xaf5d85;},a8_0x3f0e(_0xe50341,_0x5bd383);}const {messageBufferMAXLENGTH}=require(a8_0x2a4684(0x15f)),{getSheetID,getDriveID}=require(a8_0x2a4684(0x188)),{data2Stream}=require('../util/dataOps'),{isFiltered,isFilteredPhone,normalizeArabic}=require(a8_0x2a4684(0x167)),{renderKeywords}=require('./controlMsgHandler'),terminal=require(a8_0x2a4684(0x16a)),getGroups=async()=>{const _0x4ce6c0=a8_0x2a4684;let _0x500849=await client[_0x4ce6c0(0x19f)](),_0x401fda=await _0x500849[_0x4ce6c0(0x19c)](_0xea3976=>_0xea3976[_0x4ce6c0(0x18e)]==!![]&&_0xea3976[_0x4ce6c0(0x19e)]!=undefined&&_0xea3976['id']['_serialized']!=settings[_0x4ce6c0(0x18a)]);return _0x401fda=_0x401fda[_0x4ce6c0(0x176)](_0x5b623d=>({'name':_0x5b623d[_0x4ce6c0(0x19e)],'chatid':_0x5b623d['id']['_serialized']})),_0x401fda;},storeMedia=async(_0x5d19b4,_0x316893)=>{const _0x49b4db=a8_0x2a4684,_0xdbac4e=getDriveID();if(_0xdbac4e=='')return terminal[_0x49b4db(0x168)](_0x49b4db(0x177),0x1),'';const _0x312f9e=await _0x5d19b4[_0x49b4db(0x171)](),_0x2ea307=await data2Stream(_0x312f9e,_0x316893);try{const _0x46c906=await global[_0x49b4db(0x194)]['createFile'](_0xdbac4e,_0x2ea307);return _0x46c906[_0x49b4db(0x162)][_0x49b4db(0x17f)];}catch(_0x33a4d4){terminal[_0x49b4db(0x18c)]('[ERROR!]\x20Uploading\x20File\x20to\x20Gdrive:'+_0x33a4d4);}},isRepeated=async({message:_0x11389a,phone:_0xb76c87})=>{const _0x2f771f=a8_0x2a4684,_0x1d4d3b=messageBuffer[_0x2f771f(0x15d)](_0x5213a8=>_0x5213a8[_0x2f771f(0x174)]==_0x11389a&&_0x5213a8['phone']==_0xb76c87);return _0x1d4d3b;},isMatchText=(_0x763cbd,_0x5d88d6)=>{const _0x83796a=a8_0x2a4684;_0x5d88d6=normalizeArabic(_0x5d88d6);if(_0x5d88d6[_0x83796a(0x186)]('++')){let _0x5899f5=_0x5d88d6[_0x83796a(0x173)]('++')[_0x83796a(0x176)](_0x2a31c9=>_0x2a31c9['trim']())[_0x83796a(0x19c)](_0x1d9a53=>_0x1d9a53!=='');return _0x5899f5['every'](_0x1e008b=>_0x763cbd['includes'](_0x1e008b));}else return _0x763cbd[_0x83796a(0x186)](_0x5d88d6);},replaceVariables=async _0xcb19e5=>{const _0x6c8eeb=a8_0x2a4684;try{const _0x1f9d38=/\[([a-zA-Z]+)!([A-Z]{1}\d+)\]/g;let _0xcce11a=[..._0xcb19e5[_0x6c8eeb(0x17a)](_0x1f9d38)];if(_0xcce11a[_0x6c8eeb(0x169)]>0x0)for await(const _0x36072e of _0xcce11a){let _0x97bbd1=_0x36072e[0x0],_0x5307a3=_0x36072e[0x1],_0x57ceeb=_0x36072e[0x2],_0x1cbdf2=await global[_0x6c8eeb(0x170)][_0x6c8eeb(0x17c)][_0x5307a3];await _0x1cbdf2[_0x6c8eeb(0x16c)](_0x57ceeb);let _0x1d133c=String(_0x1cbdf2[_0x6c8eeb(0x184)](_0x57ceeb)[_0x6c8eeb(0x17b)]);_0xcb19e5=_0xcb19e5[_0x6c8eeb(0x163)](_0x97bbd1,_0x1d133c);}}catch(_0x3025a3){terminal[_0x6c8eeb(0x168)](_0x6c8eeb(0x16e),0x1);}return _0xcb19e5;},receivedmsgHandler=async _0x44541c=>{const _0x3e1118=a8_0x2a4684,_0x13abe1=new Date(),_0xa74059=_0x13abe1[_0x3e1118(0x197)]('en-GB')+'\x20'+_0x13abe1[_0x3e1118(0x182)]('en-EG');let _0x229b69=await _0x44541c[_0x3e1118(0x18f)]();const _0x11a169=_0x229b69[_0x3e1118(0x18e)],_0x5057aa=_0x11a169?_0x44541c[_0x3e1118(0x17d)]:'private',_0x41da5d=_0x11a169?_0x44541c[_0x3e1118(0x17e)][_0x3e1118(0x173)]('@')[0x0]:_0x44541c['from'][_0x3e1118(0x173)]('@')[0x0];let _0x2ac7e5=_0x11a169?(await getGroups())[_0x3e1118(0x19c)](_0x51b222=>_0x51b222[_0x3e1118(0x15e)]==_0x5057aa)[0x0][_0x3e1118(0x19e)]:'Private';const _0x4fbbd9=normalizeArabic(_0x44541c['body']);if(await isFiltered(_0x4fbbd9)){terminal[_0x3e1118(0x168)]('['+_0xa74059+_0x3e1118(0x172)+_0x2ac7e5+'-'+_0x41da5d,0x1);return;}if(await isFilteredPhone(_0x41da5d)){terminal[_0x3e1118(0x168)]('['+_0xa74059+_0x3e1118(0x195)+_0x2ac7e5+'-'+_0x41da5d,0x1);return;}if(await isRepeated({'message':_0x4fbbd9,'phone':_0x41da5d})){terminal[_0x3e1118(0x168)]('['+_0xa74059+_0x3e1118(0x165)+_0x2ac7e5+'-'+_0x41da5d,0x1);return;}for(const _0x25c380 of global[_0x3e1118(0x185)]){let _0x4ce481=_0x25c380[_0x3e1118(0x191)]['some'](_0x13d332=>_0x13d332[_0x3e1118(0x15e)]==_0x5057aa||_0x11a169&&_0x13d332[_0x3e1118(0x15e)]==_0x3e1118(0x181)||_0x11a169&&_0x13d332['chatid']==_0x3e1118(0x16f)&&_0x13d332[_0x3e1118(0x16f)][_0x3e1118(0x16b)](_0x3e38dc=>_0x3e38dc['chatid']!=_0x5057aa)),_0x4f7f64=_0x25c380[_0x3e1118(0x161)][_0x3e1118(0x15d)](_0x105d1f=>{const _0x54452d=_0x3e1118;if(Array[_0x54452d(0x19b)](_0x105d1f)){let _0x356af2=!![];return _0x105d1f[_0x54452d(0x192)](_0x3d239d=>{const _0x59d684=_0x54452d;Array[_0x59d684(0x19b)](_0x3d239d)?_0x356af2=_0x356af2&&_0x3d239d[_0x59d684(0x15d)](_0x2e27bb=>{return _0x2e27bb=normalizeArabic(_0x2e27bb),_0x4fbbd9['includes'](_0x2e27bb);}):_0x356af2=_0x356af2&&isMatchText(_0x4fbbd9,_0x3d239d);}),_0x356af2;}else return isMatchText(_0x4fbbd9,_0x105d1f);}),_0x1cf0fe=_0x25c380['blockedkeywords'][_0x3e1118(0x15d)](_0x41da72=>{const _0x500437=_0x3e1118;if(Array[_0x500437(0x19b)](_0x41da72)){let _0x446a68=!![];return _0x41da72[_0x500437(0x192)](_0x282610=>{const _0x495980=_0x500437;Array[_0x495980(0x19b)](_0x282610)?_0x446a68=_0x446a68&&_0x282610[_0x495980(0x15d)](_0x43dcd2=>{return _0x43dcd2=normalizeArabic(_0x43dcd2),_0x4fbbd9['includes'](_0x43dcd2);}):_0x446a68=_0x446a68&&isMatchText(_0x4fbbd9,_0x282610);}),_0x446a68;}else return isMatchText(_0x4fbbd9,_0x41da72);});if(_0x4ce481)_0x229b69[_0x3e1118(0x179)]();if(_0x4ce481&&_0x4f7f64&&!_0x1cf0fe){const _0x4db427=getSheetID();if(_0x4db427=='')return;let _0x11d34e=renderKeywords(_0x25c380[_0x3e1118(0x161)]),_0x4ef492=_0x44541c['hasMedia']?await storeMedia(_0x44541c,_0x41da5d):'';const _0x5bb218=[_0xa74059,_0x41da5d,_0x2ac7e5,_0x4fbbd9,_0x4ef492,_0x25c380[_0x3e1118(0x19e)],_0x11d34e];terminal[_0x3e1118(0x168)]('['+_0xa74059+_0x3e1118(0x180)+_0x2ac7e5+'-'+_0x41da5d+'=>'+_0x44541c[_0x3e1118(0x198)]+'\x20'+_0x11d34e);const _0x473ba2=_0x25c380[_0x3e1118(0x164)][_0x3e1118(0x19d)];try{Gsheet['addMatch'](_0x473ba2,_0x5bb218);}catch(_0x2432bf){terminal[_0x3e1118(0x18c)]('['+_0xa74059+_0x3e1118(0x193)+_0x2432bf);}_0x25c380[_0x3e1118(0x183)]&&_0x11a169&&_0x44541c[_0x3e1118(0x183)](await replaceVariables(_0x25c380[_0x3e1118(0x183)]));_0x25c380[_0x3e1118(0x187)]&&client['sendMessage'](_0x41da5d+_0x3e1118(0x160),await replaceVariables(_0x25c380[_0x3e1118(0x187)]));let _0x25a8de=messageBuffer[_0x3e1118(0x169)];_0x25a8de>messageBufferMAXLENGTH&&messageBuffer['splice'](0x0,_0x25a8de-messageBufferMAXLENGTH),global[_0x3e1118(0x19a)]['push']({'message':_0x4fbbd9,'phone':_0x41da5d});}}};module[a8_0x2a4684(0x16d)]={'receivedmsgHandler':receivedmsgHandler};function a8_0x2c6c(){const _0x5bf62a=['message','9776304GztDBz','map','[WARN!]\x20Google\x20Drive\x20Is\x20Not\x20Configured\x20Yet','942564TlcCLg','sendSeen','matchAll','formattedValue','sheetsByTitle','from','author','webViewLink',']\x20[MATCH!]\x20','allgroups','toLocaleTimeString','reply','getCellByA1','conditions','includes','replyprivate','../util/files','15020630XaMboZ','GroupID','18RovpPB','red','5812380rBQyxQ','isGroup','getChat','56cZOigY','applicable','forEach',']\x20[ERROR!]\x20Sending\x20to\x20Google\x20Sheets:','Gdrive',']\x20[FILTERED\x20PHONE!]\x20','1650560ZQFYLC','toLocaleDateString','type','445410uoDdNL','messageBuffer','isArray','filter','sheetId','name','getChats','12038IbNtlP','some','chatid','../config','@c.us','keywords','data','replace','gsheet',']\x20[REPEATED\x20MESSAGE!]\x20','147bJyaYR','../util/misc','logger','length','../util/terminal','every','loadCells','exports','[WARN!]\x20Cannot\x20get\x20variables\x0amake\x20sure\x20the\x20variables\x20worksheet\x20exists','except','GSpreadsheet','downloadMedia',']\x20[FILTERED\x20WORD!]\x20','split'];a8_0x2c6c=function(){return _0x5bf62a;};return a8_0x2c6c();}