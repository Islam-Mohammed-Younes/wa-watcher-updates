const a8_0x1a957a=a8_0x4c3e;function a8_0x4d72(){const _0x4475ae=['getChats','reply','message','sendMessage','blockedkeywords','chatid','push','3685409DrynUr','isArray','from','every','except','[ERROR!]\x20Uploading\x20File\x20to\x20Gdrive:','Gdrive','exports','downloadMedia','data','hasMedia','addMatch','messageBuffer','replyprivate','../util/files','logger','[FILTERED\x20PHONE!]\x20','split','[WARN!]\x20Google\x20Drive\x20Is\x20Not\x20Configured\x20Yet','[ERROR!]\x20Sending\x20to\x20Google\x20Sheets:','name','../util/terminal','createFile','Private','GroupID','author','trim','keywords','applicable','length','[MATCH!]\x20','_serialized','red','1582332RtMGfm','isGroup','some','6EUMWZF','body','sendSeen','map','en-GB','[FILTERED\x20WORD!]\x20','@c.us','toLocaleTimeString','5rvJYPY','en-EG','224822TeyTgD','1176584vjjJYk','conditions','private','includes','forEach','[REPEATED\x20MESSAGE!]\x20','filter','splice','toLocaleDateString','514263DcDnQs','1090359fSiJlK','9492156AtSgZw','webViewLink'];a8_0x4d72=function(){return _0x4475ae;};return a8_0x4d72();}(function(_0x2a0e24,_0x333f13){const _0x6d7fb=a8_0x4c3e,_0x7ad7f8=_0x2a0e24();while(!![]){try{const _0x4f1ee2=-parseInt(_0x6d7fb(0xc1))/0x1+parseInt(_0x6d7fb(0xb7))/0x2+-parseInt(_0x6d7fb(0xc2))/0x3+parseInt(_0x6d7fb(0xaa))/0x4*(parseInt(_0x6d7fb(0xb5))/0x5)+parseInt(_0x6d7fb(0xad))/0x6*(-parseInt(_0x6d7fb(0xcc))/0x7)+parseInt(_0x6d7fb(0xb8))/0x8+parseInt(_0x6d7fb(0xc3))/0x9;if(_0x4f1ee2===_0x333f13)break;else _0x7ad7f8['push'](_0x7ad7f8['shift']());}catch(_0x384c36){_0x7ad7f8['push'](_0x7ad7f8['shift']());}}}(a8_0x4d72,0x4a98c));function a8_0x4c3e(_0x4e6ff3,_0x29e0b0){const _0x4d7250=a8_0x4d72();return a8_0x4c3e=function(_0x4c3ed7,_0x2373f0){_0x4c3ed7=_0x4c3ed7-0x97;let _0x44d150=_0x4d7250[_0x4c3ed7];return _0x44d150;},a8_0x4c3e(_0x4e6ff3,_0x29e0b0);}const {messageBufferMAXLENGTH}=require('../config'),{getSheetID,getDriveID}=require(a8_0x1a957a(0x97)),{data2Stream}=require('../util/dataOps'),{isFiltered,isFilteredPhone,normalizeArabic}=require('../util/misc'),{renderKeywords}=require('./controlMsgHandler'),terminal=require(a8_0x1a957a(0x9e)),getGroups=async()=>{const _0x4802a6=a8_0x1a957a;let _0x4de9e9=await client[_0x4802a6(0xc5)](),_0x31bc71=await _0x4de9e9[_0x4802a6(0xbe)](_0x5ea090=>_0x5ea090[_0x4802a6(0xab)]==!![]&&_0x5ea090[_0x4802a6(0x9d)]!=undefined&&_0x5ea090['id'][_0x4802a6(0xa8)]!=settings[_0x4802a6(0xa1)]);return _0x31bc71=_0x31bc71[_0x4802a6(0xb0)](_0x37e844=>({'name':_0x37e844[_0x4802a6(0x9d)],'chatid':_0x37e844['id'][_0x4802a6(0xa8)]})),_0x31bc71;},storeMedia=async(_0x3dfdb5,_0x19456f)=>{const _0x3865b8=a8_0x1a957a,_0x1d3d7d=getDriveID();if(_0x1d3d7d=='')return terminal[_0x3865b8(0x98)](_0x3865b8(0x9b),0x1),'';const _0x43deca=await _0x3dfdb5[_0x3865b8(0xd4)](),_0x3d60a4=await data2Stream(_0x43deca,_0x19456f);try{const _0x46f981=await global[_0x3865b8(0xd2)][_0x3865b8(0x9f)](_0x1d3d7d,_0x3d60a4);return _0x46f981[_0x3865b8(0xd5)][_0x3865b8(0xc4)];}catch(_0x1b2c39){terminal[_0x3865b8(0xa9)](_0x3865b8(0xd1)+_0x1b2c39);}},isRepeated=async({message:_0x106148,phone:_0x2391c3})=>{const _0x300184=a8_0x1a957a,_0x2323d4=messageBuffer[_0x300184(0xac)](_0x29feba=>_0x29feba[_0x300184(0xc7)]==_0x106148&&_0x29feba['phone']==_0x2391c3);return _0x2323d4;},isMatchText=(_0x48e51e,_0x51a807)=>{const _0x579eb5=a8_0x1a957a;_0x51a807=normalizeArabic(_0x51a807);if(_0x51a807[_0x579eb5(0xbb)]('++')){let _0x16e067=_0x51a807[_0x579eb5(0x9a)]('++')[_0x579eb5(0xb0)](_0x3b6e8c=>_0x3b6e8c[_0x579eb5(0xa3)]())[_0x579eb5(0xbe)](_0x32f51d=>_0x32f51d!=='');return _0x16e067[_0x579eb5(0xcf)](_0x163eca=>_0x48e51e[_0x579eb5(0xbb)](_0x163eca));}else return _0x48e51e[_0x579eb5(0xbb)](_0x51a807);},receivedmsgHandler=async _0x3507bb=>{const _0x49d59c=a8_0x1a957a,_0x1eab9d=new Date(),_0xd65e34=_0x1eab9d[_0x49d59c(0xc0)](_0x49d59c(0xb1))+'\x20'+_0x1eab9d[_0x49d59c(0xb4)](_0x49d59c(0xb6));let _0x45e1c2=await _0x3507bb['getChat']();const _0x55e873=_0x45e1c2[_0x49d59c(0xab)],_0x351a20=_0x55e873?_0x3507bb[_0x49d59c(0xce)]:_0x49d59c(0xba),_0x91056d=_0x55e873?_0x3507bb[_0x49d59c(0xa2)]['split']('@')[0x0]:_0x3507bb[_0x49d59c(0xce)][_0x49d59c(0x9a)]('@')[0x0],_0x4db22e=normalizeArabic(_0x3507bb[_0x49d59c(0xae)]);if(await isFiltered(_0x4db22e)){terminal[_0x49d59c(0x98)](_0x49d59c(0xb2)+_0x91056d,0x1);return;}if(await isFilteredPhone(_0x91056d)){terminal[_0x49d59c(0x98)](_0x49d59c(0x99)+_0x91056d,0x1);return;}if(await isRepeated({'message':_0x4db22e,'phone':_0x91056d})){terminal['logger'](_0x49d59c(0xbd)+_0x91056d,0x1);return;}for(const _0x4bb5b9 of global[_0x49d59c(0xb9)]){let _0xb95ca=_0x4bb5b9[_0x49d59c(0xa5)][_0x49d59c(0xac)](_0x2d5048=>_0x2d5048[_0x49d59c(0xca)]==_0x351a20||_0x55e873&&_0x2d5048[_0x49d59c(0xca)]=='allgroups'||_0x55e873&&_0x2d5048['chatid']==_0x49d59c(0xd0)&&_0x2d5048[_0x49d59c(0xd0)][_0x49d59c(0xcf)](_0x1c1e89=>_0x1c1e89['chatid']!=_0x351a20)),_0x4e5c94=_0x4bb5b9['keywords'][_0x49d59c(0xac)](_0x6d0a6=>{const _0x4658d2=_0x49d59c;if(Array[_0x4658d2(0xcd)](_0x6d0a6)){let _0x19837f=!![];return _0x6d0a6[_0x4658d2(0xbc)](_0x5145d0=>{const _0x46d1fe=_0x4658d2;Array[_0x46d1fe(0xcd)](_0x5145d0)?_0x19837f=_0x19837f&&_0x5145d0[_0x46d1fe(0xac)](_0x4b5292=>{return _0x4b5292=normalizeArabic(_0x4b5292),_0x4db22e['includes'](_0x4b5292);}):_0x19837f=_0x19837f&&isMatchText(_0x4db22e,_0x5145d0);}),_0x19837f;}else return isMatchText(_0x4db22e,_0x6d0a6);}),_0x774ad1=_0x4bb5b9[_0x49d59c(0xc9)]['some'](_0x18cea7=>{const _0x59558e=_0x49d59c;if(Array[_0x59558e(0xcd)](_0x18cea7)){let _0x4f0246=!![];return _0x18cea7['forEach'](_0xea43ef=>{const _0x1998bb=_0x59558e;Array[_0x1998bb(0xcd)](_0xea43ef)?_0x4f0246=_0x4f0246&&_0xea43ef[_0x1998bb(0xac)](_0x5101b7=>{return _0x5101b7=normalizeArabic(_0x5101b7),_0x4db22e['includes'](_0x5101b7);}):_0x4f0246=_0x4f0246&&isMatchText(_0x4db22e,_0xea43ef);}),_0x4f0246;}else return isMatchText(_0x4db22e,_0x18cea7);});if(_0xb95ca)_0x45e1c2[_0x49d59c(0xaf)]();if(_0xb95ca&&_0x4e5c94&&!_0x774ad1){const _0x2ac31a=getSheetID();if(_0x2ac31a=='')return;let _0xf46f9c=_0x55e873?(await getGroups())['filter'](_0x291527=>_0x291527[_0x49d59c(0xca)]==_0x351a20)[0x0][_0x49d59c(0x9d)]:_0x49d59c(0xa0),_0x1d89a9=renderKeywords(_0x4bb5b9[_0x49d59c(0xa4)]),_0x1b9810=_0x3507bb[_0x49d59c(0xd6)]?await storeMedia(_0x3507bb,_0x91056d):'';const _0x4fc537=[_0xd65e34,_0x91056d,_0xf46f9c,_0x4db22e,_0x1b9810,_0x4bb5b9[_0x49d59c(0x9d)],_0x1d89a9];terminal[_0x49d59c(0x98)](_0x49d59c(0xa7)+_0xf46f9c+'-'+_0x91056d+'=>'+_0x3507bb['type']);const _0x2eef82=_0x4bb5b9['gsheet']['sheetId'];try{Gsheet[_0x49d59c(0xd7)](_0x2eef82,_0x4fc537);}catch(_0xeb2947){terminal[_0x49d59c(0xa9)](_0x49d59c(0x9c)+_0xeb2947);}if(_0x4bb5b9[_0x49d59c(0xc6)]&&_0x55e873)_0x3507bb['reply'](_0x4bb5b9[_0x49d59c(0xc6)]);if(_0x4bb5b9[_0x49d59c(0xd9)])client[_0x49d59c(0xc8)](_0x91056d+_0x49d59c(0xb3),_0x4bb5b9['replyprivate']);let _0x1146ff=messageBuffer[_0x49d59c(0xa6)];_0x1146ff>messageBufferMAXLENGTH&&messageBuffer[_0x49d59c(0xbf)](0x0,_0x1146ff-messageBufferMAXLENGTH),global[_0x49d59c(0xd8)][_0x49d59c(0xcb)]({'message':_0x4db22e,'phone':_0x91056d});}}};module[a8_0x1a957a(0xd3)]={'receivedmsgHandler':receivedmsgHandler};