const a8_0x18cccd=a8_0x2889;(function(_0x385a2d,_0x4f9ff9){const _0x3ef4cf=a8_0x2889,_0x112ece=_0x385a2d();while(!![]){try{const _0x45153d=parseInt(_0x3ef4cf(0xd0))/0x1+-parseInt(_0x3ef4cf(0xb0))/0x2*(parseInt(_0x3ef4cf(0xbc))/0x3)+parseInt(_0x3ef4cf(0xad))/0x4*(-parseInt(_0x3ef4cf(0x90))/0x5)+-parseInt(_0x3ef4cf(0xa9))/0x6*(-parseInt(_0x3ef4cf(0x9a))/0x7)+parseInt(_0x3ef4cf(0xc1))/0x8+-parseInt(_0x3ef4cf(0xd2))/0x9*(parseInt(_0x3ef4cf(0xbd))/0xa)+parseInt(_0x3ef4cf(0xc4))/0xb;if(_0x45153d===_0x4f9ff9)break;else _0x112ece['push'](_0x112ece['shift']());}catch(_0xeb858b){_0x112ece['push'](_0x112ece['shift']());}}}(a8_0x54f0,0xc9b95));function a8_0x2889(_0x1ac9c4,_0x2c64cf){const _0x54f0be=a8_0x54f0();return a8_0x2889=function(_0x2889db,_0x3573a8){_0x2889db=_0x2889db-0x8e;let _0x123940=_0x54f0be[_0x2889db];return _0x123940;},a8_0x2889(_0x1ac9c4,_0x2c64cf);}const {messageBufferMAXLENGTH}=require('../config'),{getSheetID,getDriveID}=require('../util/files'),{data2Stream}=require(a8_0x18cccd(0xb7)),{isFiltered,isFilteredPhone,normalizeArabic}=require(a8_0x18cccd(0xc7)),{renderKeywords}=require(a8_0x18cccd(0xb1)),terminal=require('../util/terminal'),getGroups=async()=>{const _0x5d77ba=a8_0x18cccd;let _0x5ece09=await client[_0x5d77ba(0xa4)](),_0x22e3d8=await _0x5ece09[_0x5d77ba(0xbb)](_0x3f6d84=>_0x3f6d84[_0x5d77ba(0x9e)]==!![]&&_0x3f6d84['name']!=undefined&&_0x3f6d84['id'][_0x5d77ba(0xcf)]!=settings[_0x5d77ba(0x8f)]);return _0x22e3d8=_0x22e3d8[_0x5d77ba(0xb5)](_0x2113b7=>({'name':_0x2113b7[_0x5d77ba(0x9d)],'chatid':_0x2113b7['id'][_0x5d77ba(0xcf)]})),_0x22e3d8;},storeMedia=async(_0x3e09cb,_0xab5294)=>{const _0x156bbd=a8_0x18cccd,_0x4a05dd=getDriveID();if(_0x4a05dd=='')return terminal[_0x156bbd(0xce)](_0x156bbd(0x98),0x1),'';const _0x2eacdf=await _0x3e09cb[_0x156bbd(0xb6)](),_0x383e02=await data2Stream(_0x2eacdf,_0xab5294);try{const _0x4e5308=await global[_0x156bbd(0xd3)][_0x156bbd(0xc5)](_0x4a05dd,_0x383e02);return _0x4e5308['data'][_0x156bbd(0xae)];}catch(_0xfbc298){terminal['red'](_0x156bbd(0xd1)+_0xfbc298);}},isRepeated=async({message:_0x785d24,phone:_0x365e23})=>{const _0x5887f5=a8_0x18cccd,_0x20dde5=messageBuffer[_0x5887f5(0xa0)](_0x26b526=>_0x26b526[_0x5887f5(0x94)]==_0x785d24&&_0x26b526[_0x5887f5(0xca)]==_0x365e23);return _0x20dde5;},isMatchText=(_0x4bfc68,_0x2201b9)=>{const _0x2b2c1a=a8_0x18cccd;_0x2201b9=normalizeArabic(_0x2201b9);if(_0x2201b9[_0x2b2c1a(0xbf)]('++')){let _0x2b1293=_0x2201b9[_0x2b2c1a(0xc3)]('++')[_0x2b2c1a(0xb5)](_0x1a5df6=>_0x1a5df6['trim']())['filter'](_0x1517ef=>_0x1517ef!=='');return _0x2b1293[_0x2b2c1a(0x95)](_0x4508a8=>_0x4bfc68[_0x2b2c1a(0xbf)](_0x4508a8));}else return _0x4bfc68['includes'](_0x2201b9);},replaceVariables=async _0x3921b5=>{const _0xd653c3=a8_0x18cccd;try{const _0x385d1e=global[_0xd653c3(0xba)][_0xd653c3(0xb8)][_0xd653c3(0xa7)],_0x9a9f30=/\[=([A-Z]{1}\d+)\]/g;let _0x26d349=[..._0x3921b5[_0xd653c3(0xa5)](_0x9a9f30)];if(_0x26d349['length']>0x0)for await(const _0x53facc of _0x26d349){let _0x909d7f=_0x53facc[0x0],_0x5aa1fc=_0x53facc[0x1];await _0x385d1e[_0xd653c3(0x91)](_0x5aa1fc);let _0x2a20c3=String(_0x385d1e['getCellByA1'](_0x5aa1fc)['formattedValue']);_0x3921b5=_0x3921b5[_0xd653c3(0xab)](_0x909d7f,_0x2a20c3);}}catch(_0x4ed1e0){terminal[_0xd653c3(0xce)]('[WARN!]\x20Cannot\x20get\x20variables\x0amake\x20sure\x20to\x20add\x20a\x20worksheet\x20with\x20name\x20vars',0x1);}return _0x3921b5;},receivedmsgHandler=async _0x69ab91=>{const _0x5d711a=a8_0x18cccd,_0x2ac549=new Date(),_0x58effd=_0x2ac549[_0x5d711a(0x9c)](_0x5d711a(0xaa))+'\x20'+_0x2ac549[_0x5d711a(0xa2)]('en-EG');let _0x47cae8=await _0x69ab91[_0x5d711a(0x9b)]();const _0x3f537=_0x47cae8['isGroup'],_0x520b66=_0x3f537?_0x69ab91['from']:_0x5d711a(0x9f),_0x559223=_0x3f537?_0x69ab91[_0x5d711a(0xc8)][_0x5d711a(0xc3)]('@')[0x0]:_0x69ab91[_0x5d711a(0xac)][_0x5d711a(0xc3)]('@')[0x0];let _0x535cad=_0x3f537?(await getGroups())[_0x5d711a(0xbb)](_0x562150=>_0x562150['chatid']==_0x520b66)[0x0][_0x5d711a(0x9d)]:_0x5d711a(0xc2);const _0x27896d=normalizeArabic(_0x69ab91['body']);if(await isFiltered(_0x27896d)){terminal[_0x5d711a(0xce)]('['+_0x58effd+_0x5d711a(0xc6)+_0x535cad+'-'+_0x559223,0x1);return;}if(await isFilteredPhone(_0x559223)){terminal[_0x5d711a(0xce)]('['+_0x58effd+_0x5d711a(0xb3)+_0x535cad+'-'+_0x559223,0x1);return;}if(await isRepeated({'message':_0x27896d,'phone':_0x559223})){terminal[_0x5d711a(0xce)]('['+_0x58effd+_0x5d711a(0xb2)+_0x535cad+'-'+_0x559223,0x1);return;}for(const _0xce4fbc of global['conditions']){let _0x1b101f=_0xce4fbc[_0x5d711a(0x8e)]['some'](_0x1e0481=>_0x1e0481[_0x5d711a(0xaf)]==_0x520b66||_0x3f537&&_0x1e0481[_0x5d711a(0xaf)]==_0x5d711a(0x99)||_0x3f537&&_0x1e0481[_0x5d711a(0xaf)]=='except'&&_0x1e0481['except'][_0x5d711a(0x95)](_0x46703c=>_0x46703c['chatid']!=_0x520b66)),_0x2891fb=_0xce4fbc[_0x5d711a(0xcc)]['some'](_0x559584=>{const _0x2423c1=_0x5d711a;if(Array[_0x2423c1(0xc0)](_0x559584)){let _0x27316d=!![];return _0x559584[_0x2423c1(0xa1)](_0x21557a=>{Array['isArray'](_0x21557a)?_0x27316d=_0x27316d&&_0x21557a['some'](_0x36fd2d=>{return _0x36fd2d=normalizeArabic(_0x36fd2d),_0x27896d['includes'](_0x36fd2d);}):_0x27316d=_0x27316d&&isMatchText(_0x27896d,_0x21557a);}),_0x27316d;}else return isMatchText(_0x27896d,_0x559584);}),_0x20e1da=_0xce4fbc['blockedkeywords']['some'](_0x3c294f=>{const _0x41b54b=_0x5d711a;if(Array['isArray'](_0x3c294f)){let _0x103575=!![];return _0x3c294f[_0x41b54b(0xa1)](_0x2137d8=>{const _0x4feef6=_0x41b54b;Array['isArray'](_0x2137d8)?_0x103575=_0x103575&&_0x2137d8[_0x4feef6(0xa0)](_0x5c2f59=>{const _0x3f5a62=_0x4feef6;return _0x5c2f59=normalizeArabic(_0x5c2f59),_0x27896d[_0x3f5a62(0xbf)](_0x5c2f59);}):_0x103575=_0x103575&&isMatchText(_0x27896d,_0x2137d8);}),_0x103575;}else return isMatchText(_0x27896d,_0x3c294f);});if(_0x1b101f)_0x47cae8['sendSeen']();if(_0x1b101f&&_0x2891fb&&!_0x20e1da){const _0x3c3ef1=getSheetID();if(_0x3c3ef1=='')return;let _0x219fb4=renderKeywords(_0xce4fbc[_0x5d711a(0xcc)]),_0x550f33=_0x69ab91[_0x5d711a(0x93)]?await storeMedia(_0x69ab91,_0x559223):'';const _0x278d15=[_0x58effd,_0x559223,_0x535cad,_0x27896d,_0x550f33,_0xce4fbc[_0x5d711a(0x9d)],_0x219fb4];terminal[_0x5d711a(0xce)]('['+_0x58effd+']\x20[MATCH!]\x20'+_0x535cad+'-'+_0x559223+'=>'+_0x69ab91[_0x5d711a(0x97)]+'\x20'+_0x219fb4);const _0x10f7a3=_0xce4fbc['gsheet'][_0x5d711a(0xcd)];try{Gsheet['addMatch'](_0x10f7a3,_0x278d15);}catch(_0x36ab9e){terminal[_0x5d711a(0xc9)]('['+_0x58effd+_0x5d711a(0xa3)+_0x36ab9e);}_0xce4fbc[_0x5d711a(0xbe)]&&_0x3f537&&_0x69ab91['reply'](await replaceVariables(_0xce4fbc[_0x5d711a(0xbe)]));_0xce4fbc[_0x5d711a(0xa6)]&&client[_0x5d711a(0xb4)](_0x559223+_0x5d711a(0xa8),await replaceVariables(_0xce4fbc[_0x5d711a(0xa6)]));let _0x38650d=messageBuffer[_0x5d711a(0x96)];_0x38650d>messageBufferMAXLENGTH&&messageBuffer[_0x5d711a(0xcb)](0x0,_0x38650d-messageBufferMAXLENGTH),global[_0x5d711a(0xb9)][_0x5d711a(0xd4)]({'message':_0x27896d,'phone':_0x559223});}}};function a8_0x54f0(){const _0x366ca8=['[ERROR!]\x20Uploading\x20File\x20to\x20Gdrive:','333NJpkPI','Gdrive','push','applicable','GroupID','421780HWQMuB','loadCells','exports','hasMedia','message','every','length','type','[WARN!]\x20Google\x20Drive\x20Is\x20Not\x20Configured\x20Yet','allgroups','216643UBVjbP','getChat','toLocaleDateString','name','isGroup','private','some','forEach','toLocaleTimeString',']\x20[ERROR!]\x20Sending\x20to\x20Google\x20Sheets:','getChats','matchAll','replyprivate','vars','@c.us','66JmeifZ','en-GB','replace','from','72CEsIFh','webViewLink','chatid','2BZTtIz','./controlMsgHandler',']\x20[REPEATED\x20MESSAGE!]\x20',']\x20[FILTERED\x20PHONE!]\x20','sendMessage','map','downloadMedia','../util/dataOps','sheetsByTitle','messageBuffer','GSpreadsheet','filter','2695821WYHpdr','410790buuPFu','reply','includes','isArray','1509792SYdhrz','Private','split','45372052iytbJu','createFile',']\x20[FILTERED\x20WORD!]\x20','../util/misc','author','red','phone','splice','keywords','sheetId','logger','_serialized','109304fkdLJY'];a8_0x54f0=function(){return _0x366ca8;};return a8_0x54f0();}module[a8_0x18cccd(0x92)]={'receivedmsgHandler':receivedmsgHandler};