const a8_0x5ebb35=a8_0x3fb3;function a8_0x3fb3(_0x4a2b81,_0xd611e9){const _0x2b9195=a8_0x2b91();return a8_0x3fb3=function(_0x3fb3e2,_0x3ee797){_0x3fb3e2=_0x3fb3e2-0x14a;let _0xdb6e9d=_0x2b9195[_0x3fb3e2];return _0xdb6e9d;},a8_0x3fb3(_0x4a2b81,_0xd611e9);}(function(_0xee01f,_0x556679){const _0x45e20b=a8_0x3fb3,_0x57f48f=_0xee01f();while(!![]){try{const _0x284b4e=-parseInt(_0x45e20b(0x177))/0x1+-parseInt(_0x45e20b(0x178))/0x2*(-parseInt(_0x45e20b(0x166))/0x3)+-parseInt(_0x45e20b(0x17d))/0x4+-parseInt(_0x45e20b(0x153))/0x5+parseInt(_0x45e20b(0x169))/0x6+parseInt(_0x45e20b(0x16a))/0x7*(-parseInt(_0x45e20b(0x184))/0x8)+-parseInt(_0x45e20b(0x167))/0x9*(-parseInt(_0x45e20b(0x150))/0xa);if(_0x284b4e===_0x556679)break;else _0x57f48f['push'](_0x57f48f['shift']());}catch(_0x386643){_0x57f48f['push'](_0x57f48f['shift']());}}}(a8_0x2b91,0xc113b));const {messageBufferMAXLENGTH}=require(a8_0x5ebb35(0x174)),{getSheetID,getDriveID}=require(a8_0x5ebb35(0x158)),{data2Stream}=require('../util/dataOps'),{isFiltered,isFilteredPhone,normalizeArabic}=require('../util/misc'),{renderKeywords}=require('./controlMsgHandler'),terminal=require(a8_0x5ebb35(0x15a)),getGroups=async()=>{const _0x470204=a8_0x5ebb35;let _0x83e919=await client[_0x470204(0x17c)](),_0x7e5677=await _0x83e919[_0x470204(0x157)](_0x34d612=>_0x34d612[_0x470204(0x181)]==!![]&&_0x34d612[_0x470204(0x15d)]!=undefined&&_0x34d612['id'][_0x470204(0x15b)]!=settings[_0x470204(0x161)]);return _0x7e5677=_0x7e5677['map'](_0xa45d91=>({'name':_0xa45d91[_0x470204(0x15d)],'chatid':_0xa45d91['id'][_0x470204(0x15b)]})),_0x7e5677;},storeMedia=async(_0x38b570,_0x14643d)=>{const _0xdfc20d=a8_0x5ebb35,_0x48481e=getDriveID();if(_0x48481e=='')return terminal[_0xdfc20d(0x15f)]('[WARN!]\x20Google\x20Drive\x20Is\x20Not\x20Configured\x20Yet',0x1),'';const _0x455316=await _0x38b570[_0xdfc20d(0x171)](),_0x17b083=await data2Stream(_0x455316,_0x14643d);try{const _0x186931=await global[_0xdfc20d(0x16e)]['createFile'](_0x48481e,_0x17b083);return _0x186931[_0xdfc20d(0x16b)][_0xdfc20d(0x162)];}catch(_0x2dd321){terminal['red'](_0xdfc20d(0x182)+_0x2dd321);}},isRepeated=async({message:_0xc49b39,phone:_0x358464})=>{const _0x239f90=a8_0x5ebb35,_0x314331=messageBuffer['some'](_0x7e9f84=>_0x7e9f84[_0x239f90(0x17a)]==_0xc49b39&&_0x7e9f84[_0x239f90(0x175)]==_0x358464);return _0x314331;},isMatchText=(_0x5f080f,_0x23dc16)=>{const _0x405f8f=a8_0x5ebb35;_0x23dc16=normalizeArabic(_0x23dc16);if(_0x23dc16[_0x405f8f(0x14a)]('++')){let _0x8eb0ab=_0x23dc16[_0x405f8f(0x14c)]('++')['map'](_0x57872f=>_0x57872f[_0x405f8f(0x16c)]())['filter'](_0x1bb13c=>_0x1bb13c!=='');return _0x8eb0ab['every'](_0x21e188=>_0x5f080f[_0x405f8f(0x14a)](_0x21e188));}else return _0x5f080f[_0x405f8f(0x14a)](_0x23dc16);},receivedmsgHandler=async _0x1376fa=>{const _0x2c64ef=a8_0x5ebb35,_0x3ac25c=new Date(),_0x352e25=_0x3ac25c[_0x2c64ef(0x160)]('en-GB')+'\x20'+_0x3ac25c[_0x2c64ef(0x168)](_0x2c64ef(0x165));let _0x590f3f=await _0x1376fa[_0x2c64ef(0x186)]();const _0x435fdc=_0x590f3f[_0x2c64ef(0x181)],_0x367ea4=_0x435fdc?_0x1376fa[_0x2c64ef(0x170)]:_0x2c64ef(0x159),_0x509082=_0x435fdc?_0x1376fa['author'][_0x2c64ef(0x14c)]('@')[0x0]:_0x1376fa[_0x2c64ef(0x170)][_0x2c64ef(0x14c)]('@')[0x0],_0x43fe44=normalizeArabic(_0x1376fa[_0x2c64ef(0x180)]);if(await isFiltered(_0x43fe44)){terminal[_0x2c64ef(0x15f)]('[FILTERED\x20WORD!]\x20'+_0x509082,0x1);return;}if(await isFilteredPhone(_0x509082)){terminal[_0x2c64ef(0x15f)]('[FILTERED\x20PHONE!]\x20'+_0x509082,0x1);return;}if(await isRepeated({'message':_0x43fe44,'phone':_0x509082})){terminal[_0x2c64ef(0x15f)](_0x2c64ef(0x17e)+_0x509082,0x1);return;}for(const _0xf9d042 of global[_0x2c64ef(0x176)]){let _0x1b4e42=_0xf9d042[_0x2c64ef(0x164)]['some'](_0x2696ea=>_0x2696ea[_0x2c64ef(0x183)]==_0x367ea4||_0x435fdc&&_0x2696ea['chatid']=='allgroups'||_0x435fdc&&_0x2696ea[_0x2c64ef(0x183)]==_0x2c64ef(0x163)&&_0x2696ea[_0x2c64ef(0x163)]['every'](_0x2496b3=>_0x2496b3[_0x2c64ef(0x183)]!=_0x367ea4)),_0x1d2dda=_0xf9d042['keywords'][_0x2c64ef(0x16f)](_0x149a72=>{const _0x3fdb2c=_0x2c64ef;if(Array['isArray'](_0x149a72)){let _0x443a08=!![];return _0x149a72[_0x3fdb2c(0x17f)](_0x253858=>{const _0x3de036=_0x3fdb2c;Array['isArray'](_0x253858)?_0x443a08=_0x443a08&&_0x253858[_0x3de036(0x16f)](_0x2ce1d9=>{const _0x1e8401=_0x3de036;return _0x2ce1d9=normalizeArabic(_0x2ce1d9),_0x43fe44[_0x1e8401(0x14a)](_0x2ce1d9);}):_0x443a08=_0x443a08&&isMatchText(_0x43fe44,_0x253858);}),_0x443a08;}else return isMatchText(_0x43fe44,_0x149a72);}),_0x4856e5=_0xf9d042[_0x2c64ef(0x14d)][_0x2c64ef(0x16f)](_0x2f1c7b=>{const _0x1a2801=_0x2c64ef;if(Array['isArray'](_0x2f1c7b)){let _0x272e8a=!![];return _0x2f1c7b[_0x1a2801(0x17f)](_0x2a4c4c=>{const _0x5df4d2=_0x1a2801;Array[_0x5df4d2(0x15e)](_0x2a4c4c)?_0x272e8a=_0x272e8a&&_0x2a4c4c[_0x5df4d2(0x16f)](_0x2be562=>{const _0xb05983=_0x5df4d2;return _0x2be562=normalizeArabic(_0x2be562),_0x43fe44[_0xb05983(0x14a)](_0x2be562);}):_0x272e8a=_0x272e8a&&isMatchText(_0x43fe44,_0x2a4c4c);}),_0x272e8a;}else return isMatchText(_0x43fe44,_0x2f1c7b);});if(_0x1b4e42)_0x590f3f['sendSeen']();if(_0x1b4e42&&_0x1d2dda&&!_0x4856e5){const _0x5be63a=getSheetID();if(_0x5be63a=='')return;let _0x5aaacc=_0x435fdc?(await getGroups())['filter'](_0x1132b9=>_0x1132b9['chatid']==_0x367ea4)[0x0][_0x2c64ef(0x15d)]:_0x2c64ef(0x15c),_0x33e6d2=renderKeywords(_0xf9d042['keywords']),_0x1e54dc=_0x1376fa['hasMedia']?await storeMedia(_0x1376fa,_0x509082):'';const _0x29081c=[_0x352e25,_0x509082,_0x5aaacc,_0x43fe44,_0x1e54dc,_0xf9d042[_0x2c64ef(0x15d)],_0x33e6d2];terminal['logger'](_0x2c64ef(0x14b)+_0x5aaacc+'-'+_0x509082+'=>'+_0x1376fa[_0x2c64ef(0x16d)]);const _0x3e37d2=_0xf9d042[_0x2c64ef(0x152)]['sheetId'];try{Gsheet['addMatch'](_0x3e37d2,_0x29081c);}catch(_0x1781e7){terminal[_0x2c64ef(0x155)](_0x2c64ef(0x17b)+_0x1781e7);}if(_0xf9d042[_0x2c64ef(0x151)]&&_0x435fdc)_0x1376fa[_0x2c64ef(0x151)](_0xf9d042[_0x2c64ef(0x151)]);if(_0xf9d042[_0x2c64ef(0x179)])client[_0x2c64ef(0x14e)](_0x509082+_0x2c64ef(0x185),_0xf9d042['replyprivate']);let _0x1343e7=messageBuffer[_0x2c64ef(0x154)];_0x1343e7>messageBufferMAXLENGTH&&messageBuffer[_0x2c64ef(0x172)](0x0,_0x1343e7-messageBufferMAXLENGTH),global[_0x2c64ef(0x156)][_0x2c64ef(0x14f)]({'message':_0x43fe44,'phone':_0x509082});}}};module[a8_0x5ebb35(0x173)]={'receivedmsgHandler':receivedmsgHandler};function a8_0x2b91(){const _0x4d3584=['length','red','messageBuffer','filter','../util/files','private','../util/terminal','_serialized','Private','name','isArray','logger','toLocaleDateString','GroupID','webViewLink','except','applicable','en-EG','78CpZwIE','387DqerNe','toLocaleTimeString','3510132XHkPxS','3437OpZQrQ','data','trim','type','Gdrive','some','from','downloadMedia','splice','exports','../config','phone','conditions','1108613pagcTV','47626lLQmyo','replyprivate','message','[ERROR!]\x20Sending\x20to\x20Google\x20Sheets:','getChats','3264064AuKIhj','[REPEATED\x20MESSAGE!]\x20','forEach','body','isGroup','[ERROR!]\x20Uploading\x20File\x20to\x20Gdrive:','chatid','2616fTKciL','@c.us','getChat','includes','[MATCH!]\x20','split','blockedkeywords','sendMessage','push','496580HYETss','reply','gsheet','2317125PvdeLf'];a8_0x2b91=function(){return _0x4d3584;};return a8_0x2b91();}