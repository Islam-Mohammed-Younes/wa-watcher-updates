const a8_0x54eff=a8_0x408f;(function(_0x5e1353,_0x46b527){const _0x9548dd=a8_0x408f,_0xe6586=_0x5e1353();while(!![]){try{const _0x938a9e=parseInt(_0x9548dd(0x133))/0x1*(parseInt(_0x9548dd(0x103))/0x2)+-parseInt(_0x9548dd(0x12e))/0x3*(parseInt(_0x9548dd(0x135))/0x4)+parseInt(_0x9548dd(0x136))/0x5+parseInt(_0x9548dd(0x10a))/0x6*(-parseInt(_0x9548dd(0x11e))/0x7)+parseInt(_0x9548dd(0x123))/0x8*(parseInt(_0x9548dd(0x105))/0x9)+-parseInt(_0x9548dd(0x111))/0xa*(parseInt(_0x9548dd(0x130))/0xb)+parseInt(_0x9548dd(0x12c))/0xc*(parseInt(_0x9548dd(0x119))/0xd);if(_0x938a9e===_0x46b527)break;else _0xe6586['push'](_0xe6586['shift']());}catch(_0xe76558){_0xe6586['push'](_0xe6586['shift']());}}}(a8_0x18cb,0x7a9b7));const {messageBufferMAXLENGTH}=require(a8_0x54eff(0xfc)),{getSheetID,getDriveID}=require(a8_0x54eff(0x112)),{data2Stream}=require('../util/dataOps'),{isFiltered,isFilteredPhone,normalizeArabic}=require(a8_0x54eff(0x10e)),{renderKeywords}=require(a8_0x54eff(0x127)),terminal=require(a8_0x54eff(0x107)),getGroups=async()=>{const _0x3f6b18=a8_0x54eff;let _0x5741ef=await client[_0x3f6b18(0x11a)](),_0x1ae31a=await _0x5741ef[_0x3f6b18(0x11d)](_0x137161=>_0x137161['isGroup']==!![]&&_0x137161[_0x3f6b18(0x114)]!=undefined&&_0x137161['id'][_0x3f6b18(0x13a)]!=settings['GroupID']);return _0x1ae31a=_0x1ae31a[_0x3f6b18(0x10d)](_0x31e95f=>({'name':_0x31e95f[_0x3f6b18(0x114)],'chatid':_0x31e95f['id']['_serialized']})),_0x1ae31a;},storeMedia=async(_0x3fe880,_0x54c6ec)=>{const _0xd8a674=a8_0x54eff,_0x1481cb=getDriveID();if(_0x1481cb=='')return terminal['logger']('[WARN!]\x20Google\x20Drive\x20Is\x20Not\x20Configured\x20Yet',0x1),'';const _0x59ed72=await _0x3fe880[_0xd8a674(0x128)](),_0x36ac95=await data2Stream(_0x59ed72,_0x54c6ec);try{const _0x4abfe0=await global[_0xd8a674(0x108)]['createFile'](_0x1481cb,_0x36ac95);return _0x4abfe0[_0xd8a674(0x126)][_0xd8a674(0x118)];}catch(_0x35c1c2){terminal[_0xd8a674(0x10c)](_0xd8a674(0x131)+_0x35c1c2);}},isRepeated=async({message:_0x29796d,phone:_0xe94ad1})=>{const _0x30e694=a8_0x54eff,_0x4933da=messageBuffer[_0x30e694(0x109)](_0x326f23=>_0x326f23[_0x30e694(0x138)]==_0x29796d&&_0x326f23['phone']==_0xe94ad1);return _0x4933da;},isMatchText=(_0x12e591,_0x184ec5)=>{const _0x5a3712=a8_0x54eff;_0x184ec5=normalizeArabic(_0x184ec5);if(_0x184ec5['includes']('++')){let _0x424df4=_0x184ec5[_0x5a3712(0x132)]('++')['map'](_0x2ad0f1=>_0x2ad0f1['trim']())[_0x5a3712(0x11d)](_0x51ff21=>_0x51ff21!=='');return _0x424df4['every'](_0x1fa900=>_0x12e591['includes'](_0x1fa900));}else return _0x12e591[_0x5a3712(0x115)](_0x184ec5);},replaceVariables=async _0x359de7=>{const _0x1685f9=a8_0x54eff;try{const _0x3ff829=/\[=([a-zA-Z]+)!([A-Z]{1}\d+)\]/g;let _0xac8715=[..._0x359de7[_0x1685f9(0x134)](_0x3ff829)];if(_0xac8715['length']>0x0)for await(const _0x16021e of _0xac8715){let _0x57b117=_0x16021e[0x0],_0x28e17f=_0x16021e[0x1],_0x4287d4=_0x16021e[0x1],_0x59502d=global[_0x1685f9(0x122)][_0x1685f9(0x10b)][_0x28e17f];await _0x59502d['loadCells'](_0x4287d4);let _0x1f3370=String(_0x59502d['getCellByA1'](_0x4287d4)[_0x1685f9(0x100)]);_0x359de7=_0x359de7['replace'](_0x57b117,_0x1f3370);}}catch(_0x142999){terminal[_0x1685f9(0x113)]('[WARN!]\x20Cannot\x20get\x20variables\x0amake\x20sure\x20to\x20add\x20a\x20worksheet\x20with\x20name\x20vars',0x1);}return _0x359de7;},receivedmsgHandler=async _0x3bc7c1=>{const _0x44148e=a8_0x54eff,_0x2543ae=new Date(),_0x35f4a3=_0x2543ae[_0x44148e(0x101)]('en-GB')+'\x20'+_0x2543ae[_0x44148e(0x104)](_0x44148e(0x125));let _0x495488=await _0x3bc7c1['getChat']();const _0x365eec=_0x495488[_0x44148e(0x116)],_0x5046b9=_0x365eec?_0x3bc7c1[_0x44148e(0x12d)]:_0x44148e(0x106),_0x2e3d58=_0x365eec?_0x3bc7c1[_0x44148e(0xfe)]['split']('@')[0x0]:_0x3bc7c1['from']['split']('@')[0x0];let _0x434cf0=_0x365eec?(await getGroups())[_0x44148e(0x11d)](_0x3c847b=>_0x3c847b['chatid']==_0x5046b9)[0x0]['name']:_0x44148e(0x11f);const _0x4ddc3c=normalizeArabic(_0x3bc7c1[_0x44148e(0x102)]);if(await isFiltered(_0x4ddc3c)){terminal[_0x44148e(0x113)]('['+_0x35f4a3+']\x20[FILTERED\x20WORD!]\x20'+_0x434cf0+'-'+_0x2e3d58,0x1);return;}if(await isFilteredPhone(_0x2e3d58)){terminal[_0x44148e(0x113)]('['+_0x35f4a3+']\x20[FILTERED\x20PHONE!]\x20'+_0x434cf0+'-'+_0x2e3d58,0x1);return;}if(await isRepeated({'message':_0x4ddc3c,'phone':_0x2e3d58})){terminal['logger']('['+_0x35f4a3+']\x20[REPEATED\x20MESSAGE!]\x20'+_0x434cf0+'-'+_0x2e3d58,0x1);return;}for(const _0x31f1c6 of global['conditions']){let _0x46ec1b=_0x31f1c6[_0x44148e(0x12a)][_0x44148e(0x109)](_0x14a08a=>_0x14a08a['chatid']==_0x5046b9||_0x365eec&&_0x14a08a[_0x44148e(0x129)]==_0x44148e(0x121)||_0x365eec&&_0x14a08a[_0x44148e(0x129)]=='except'&&_0x14a08a[_0x44148e(0xfb)]['every'](_0x339f46=>_0x339f46['chatid']!=_0x5046b9)),_0x555943=_0x31f1c6['keywords'][_0x44148e(0x109)](_0x4998c4=>{const _0x25c026=_0x44148e;if(Array[_0x25c026(0x124)](_0x4998c4)){let _0x42a175=!![];return _0x4998c4['forEach'](_0x45d886=>{Array['isArray'](_0x45d886)?_0x42a175=_0x42a175&&_0x45d886['some'](_0x42a338=>{const _0x44fa11=a8_0x408f;return _0x42a338=normalizeArabic(_0x42a338),_0x4ddc3c[_0x44fa11(0x115)](_0x42a338);}):_0x42a175=_0x42a175&&isMatchText(_0x4ddc3c,_0x45d886);}),_0x42a175;}else return isMatchText(_0x4ddc3c,_0x4998c4);}),_0x308ce7=_0x31f1c6[_0x44148e(0x10f)]['some'](_0x434dea=>{const _0x3c7b5f=_0x44148e;if(Array[_0x3c7b5f(0x124)](_0x434dea)){let _0x5595f1=!![];return _0x434dea['forEach'](_0x12fbe5=>{const _0x26e75a=_0x3c7b5f;Array['isArray'](_0x12fbe5)?_0x5595f1=_0x5595f1&&_0x12fbe5[_0x26e75a(0x109)](_0x2ea44a=>{const _0x260d66=_0x26e75a;return _0x2ea44a=normalizeArabic(_0x2ea44a),_0x4ddc3c[_0x260d66(0x115)](_0x2ea44a);}):_0x5595f1=_0x5595f1&&isMatchText(_0x4ddc3c,_0x12fbe5);}),_0x5595f1;}else return isMatchText(_0x4ddc3c,_0x434dea);});if(_0x46ec1b)_0x495488[_0x44148e(0x11c)]();if(_0x46ec1b&&_0x555943&&!_0x308ce7){const _0x1a32c8=getSheetID();if(_0x1a32c8=='')return;let _0x1677be=renderKeywords(_0x31f1c6[_0x44148e(0x13b)]),_0x4d62a5=_0x3bc7c1['hasMedia']?await storeMedia(_0x3bc7c1,_0x2e3d58):'';const _0x2c77a0=[_0x35f4a3,_0x2e3d58,_0x434cf0,_0x4ddc3c,_0x4d62a5,_0x31f1c6[_0x44148e(0x114)],_0x1677be];terminal[_0x44148e(0x113)]('['+_0x35f4a3+']\x20[MATCH!]\x20'+_0x434cf0+'-'+_0x2e3d58+'=>'+_0x3bc7c1[_0x44148e(0xfd)]+'\x20'+_0x1677be);const _0x3e6c51=_0x31f1c6['gsheet'][_0x44148e(0x12b)];try{Gsheet['addMatch'](_0x3e6c51,_0x2c77a0);}catch(_0x482c48){terminal['red']('['+_0x35f4a3+']\x20[ERROR!]\x20Sending\x20to\x20Google\x20Sheets:'+_0x482c48);}_0x31f1c6['reply']&&_0x365eec&&_0x3bc7c1[_0x44148e(0x117)](await replaceVariables(_0x31f1c6[_0x44148e(0x117)]));_0x31f1c6[_0x44148e(0x110)]&&client[_0x44148e(0x11b)](_0x2e3d58+'@c.us',await replaceVariables(_0x31f1c6[_0x44148e(0x110)]));let _0x22a5fd=messageBuffer[_0x44148e(0x139)];_0x22a5fd>messageBufferMAXLENGTH&&messageBuffer[_0x44148e(0x137)](0x0,_0x22a5fd-messageBufferMAXLENGTH),global[_0x44148e(0xff)][_0x44148e(0x12f)]({'message':_0x4ddc3c,'phone':_0x2e3d58});}}};module[a8_0x54eff(0x120)]={'receivedmsgHandler':receivedmsgHandler};function a8_0x408f(_0x535b53,_0x51ee81){const _0x18cb1a=a8_0x18cb();return a8_0x408f=function(_0x408f0a,_0x4b2d76){_0x408f0a=_0x408f0a-0xfb;let _0x27b3eb=_0x18cb1a[_0x408f0a];return _0x27b3eb;},a8_0x408f(_0x535b53,_0x51ee81);}function a8_0x18cb(){const _0x383d17=['formattedValue','toLocaleDateString','body','66AWBlnV','toLocaleTimeString','83736ZvLjXT','private','../util/terminal','Gdrive','some','6zeoJEE','sheetsByTitle','red','map','../util/misc','blockedkeywords','replyprivate','10WyOdwF','../util/files','logger','name','includes','isGroup','reply','webViewLink','91cEAnyS','getChats','sendMessage','sendSeen','filter','4473511vUYmeO','Private','exports','allgroups','GSpreadsheet','328yGXZrh','isArray','en-EG','data','./controlMsgHandler','downloadMedia','chatid','applicable','sheetId','3450360pKSFnk','from','6OHyewy','push','7309522Lgblpd','[ERROR!]\x20Uploading\x20File\x20to\x20Gdrive:','split','854kUoPrM','matchAll','1309348xRgAqC','190460DiskSp','splice','message','length','_serialized','keywords','except','../config','type','author','messageBuffer'];a8_0x18cb=function(){return _0x383d17;};return a8_0x18cb();}